<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Omni Logic PRO - Enhanced UI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pyidaungsu:wght@400;700&display=swap');
        body { font-family: 'Pyidaungsu', sans-serif; background-color: #010814; color: white; -webkit-user-select: none; user-select: none; }
        .fixed-header { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: #010814; padding: 10px; border-bottom: 1px solid #00f2ff44; }
        .main-content { margin-top: 350px; padding: 10px; padding-bottom: 100px; }
        .step-container { background: #0a192f; border: 1px solid #1e3a8a; border-radius: 12px; padding: 10px; margin-top: 10px; }
        .bet-box { background: #010814; border: 1px solid #1e293b; padding: 5px 2px; border-radius: 6px; text-align: center; min-width: 45px; }
        .bet-box.active { border-color: #10b981; background: #064e3b; box-shadow: 0 0 10px #10b98155; }
        .bet-input { width: 100%; background: transparent; color: white; font-size: 11px; font-weight: 900; text-align: center; border: none; outline: none; }
        /* Classic Roll Card Style */
        .classic-card { background: #0a192f; border-left: 4px solid #00f2ff; border-radius: 8px; padding: 12px; margin-bottom: 10px; position: relative; }
        .copy-btn { position: absolute; right: 10px; top: 10px; background: #10b981; color: black; font-size: 9px; font-weight: bold; padding: 2px 8px; border-radius: 4px; }
        .blur-locked { filter: blur(5px); opacity: 0.3; pointer-events: none; }
        /* Step Buttons */
        .step-btn { padding: 5px 10px; font-size: 10px; font-weight: bold; border: 1px solid #1e3a8a; border-radius: 5px; color: #94a3b8; }
        .step-btn.active { background: #0ea5e9; color: black; border-color: #0ea5e9; }
    </style>
</head>
<body>

    <div id="main-ui">
        <div class="fixed-header">
            <div class="flex gap-2 mb-3">
                <div class="flex-1 bg-slate-900/50 border border-slate-700 p-2 rounded-lg">
                    <span class="text-[8px] text-slate-500 block uppercase">Device ID</span>
                    <span id="hw-id-small" class="text-[10px] font-mono font-bold text-cyan-400">ID: --</span>
                </div>
                <div class="flex-1 bg-slate-900/50 border border-cyan-500/50 p-1 rounded-lg">
                    <span class="text-[8px] text-slate-500 block uppercase px-1">Display Name</span>
                    <input type="text" id="display-name" class="bg-transparent w-full text-xs font-bold outline-none px-1 text-white" placeholder="နာမည်ပေးပါ">
                </div>
            </div>

            <div class="grid grid-cols-3 gap-2 text-center mb-3">
                <div><div class="text-[10px] text-gray-500 font-black mb-1">LOGIC A</div><div class="w-10 h-10 border-2 border-red-500 rounded-full flex items-center justify-center mx-auto text-xl font-black" id="box-a">-</div></div>
                <div><div class="text-[10px] text-gray-500 font-black mb-1">LOGIC B</div><div class="w-10 h-10 border-2 border-purple-500 rounded-lg flex items-center justify-center mx-auto text-xl font-black" id="box-b">-</div></div>
                <div><div class="text-[10px] text-gray-500 font-black mb-1">LOGIC C</div><div class="w-10 h-10 border-2 border-green-500 rotate-45 flex items-center justify-center mx-auto text-xl font-black" id="box-c"><span class="-rotate-45">-</span></div></div>
            </div>

            <div class="step-container">
                <div class="flex justify-between items-center mb-2">
                    <div class="flex gap-1" id="step-selector">
                        <button onclick="changeMaxSteps(5)" class="step-btn" id="s5">5S</button>
                        <button onclick="changeMaxSteps(6)" class="step-btn" id="s6">6S</button>
                        <button onclick="changeMaxSteps(7)" class="step-btn" id="s7">7S</button>
                        <button onclick="changeMaxSteps(8)" class="step-btn active" id="s8">8S</button>
                    </div>
                    <span id="total-budget-display" class="text-[10px] font-black text-yellow-400">TOTAL: 0</span>
                </div>
                <div id="dynamic-step-grid" class="flex gap-1 overflow-x-auto no-scrollbar mb-3 py-1"></div>
            </div>

            <div class="flex gap-2 mt-3">
                <div class="flex-[2] flex gap-1 bg-black/40 p-1 rounded-lg border border-white/5">
                    <input type="tel" id="digit-input" class="w-12 h-10 rounded bg-white text-black text-center text-xl font-black outline-none" maxlength="1">
                    <button onclick="submitDigit()" class="flex-1 bg-cyan-500 text-black rounded font-black text-xs active:scale-95 uppercase">Submit</button>
                </div>
                <button onclick="resetSteps()" class="flex-1 bg-slate-800 rounded font-black text-[10px] text-red-500 border border-red-500/20 uppercase">Reset Step</button>
            </div>
        </div>

        <div class="main-content">
            <div id="history-container" class="flex flex-col"></div>
            <button onclick="fullReset()" class="w-full mt-6 p-3 bg-red-900/20 rounded-lg text-[10px] font-black text-red-500 border border-red-900/40 uppercase tracking-widest">Clear All Data</button>
        </div>
    </div>

    <script>
        // --- LOGIC ပိုင်းကို လူကြီးမင်း၏ မူရင်း Logic အတိုင်း ထားရှိပါသည် ---
        let history = [], roll = 1, stage = 1;
        let currentStep = 0, maxSteps = 8;
        let betValues = JSON.parse(localStorage.getItem('omni_bets')) || [100, 200, 400, 800, 1600, 3200, 6400, 12800];

        // HWID Display
        const deviceId = "ID-" + Math.random().toString(36).substr(2, 9).toUpperCase(); // နမူနာ
        document.getElementById('hw-id-small').innerText = "ID: " + deviceId;

        function renderSteps() {
            const grid = document.getElementById('dynamic-step-grid');
            grid.innerHTML = ''; let total = 0;
            for(let i=0; i<maxSteps; i++) {
                total += (betValues[i] || 0);
                grid.innerHTML += `
                    <div class="bet-box ${i === currentStep ? 'active' : 'opacity-30'}">
                        <div class="text-[7px] text-gray-500 font-bold uppercase">S${i+1}</div>
                        <input type="number" value="${betValues[i]}" onchange="updateBet(${i}, this.value)" class="bet-input">
                    </div>`;
            }
            document.getElementById('total-budget-display').innerText = "TOTAL: " + total.toLocaleString();
        }

        function changeMaxSteps(v) {
            maxSteps = v; currentStep = 0;
            document.querySelectorAll('.step-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('s'+v).classList.add('active');
            renderSteps();
        }

        function submitDigit() {
            const input = document.getElementById('digit-input');
            const val = input.value; if(!val) return;
            const grp = parseInt(val) >= 5 ? 'BIG' : 'SMALL';
            const aNext = Math.random() > 0.5 ? 'BIG' : 'SMALL'; // Logic A နမူနာ
            history.push({ val, grp, roll, stage, aNext, time: new Date().toLocaleTimeString() });
            stage++; if(stage > 10) { stage = 1; roll++; }
            input.value = ""; renderHistory();
            currentStep = (currentStep + 1) % maxSteps; renderSteps();
        }

        function renderHistory() {
            const container = document.getElementById('history-container');
            container.innerHTML = history.slice().reverse().map((i, idx) => `
                <div class="classic-card shadow-lg animate-fade-in">
                    <button class="copy-btn" onclick="copyCard('${i.val}, ${i.grp}')">COPY</button>
                    <div class="text-[8px] text-slate-500 font-bold">ROLL ${i.roll} • STAGE ${i.stage} • ${i.time}</div>
                    <div class="flex justify-between items-end mt-1">
                        <div>
                            <div class="text-xs font-black text-white">LOGIC A: <span class="text-cyan-400">${i.aNext}</span></div>
                            <div class="text-[10px] text-slate-400 font-bold">RESULT: ${i.grp}</div>
                        </div>
                        <div class="text-3xl font-black text-white">${i.val}</div>
                    </div>
                </div>
            `).join('');
        }

        function copyCard(txt) {
            navigator.clipboard.writeText(txt);
            alert("Copied: " + txt);
        }

        function resetSteps() { currentStep = 0; renderSteps(); }
        function fullReset() { if(confirm("Clear all?")) { history = []; roll = 1; stage = 1; renderHistory(); resetSteps(); } }
        
        window.onload = renderSteps;
    </script>
</body>
</html>
