<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Win6 Pro - Max Visibility</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pyidaungsu:wght@400;700&display=swap');
        body { font-family: 'Pyidaungsu', sans-serif; background-color: #001f3f; color: white; }
        
        /* Prediction Group */
        .pred-section { background-color: #003366; border: 3px solid #00d4ff; border-radius: 30px; }
        .box-p { border: 5px solid #ff4136; color: #ff4136; border-radius: 50%; width: 70px; height: 70px; font-size: 35px; display: flex; align-items: center; justify-content: center; margin: 0 auto; background: white; font-weight: 900; }
        .box-e { border: 5px solid #b10dc9; color: #b10dc9; border-radius: 15px; width: 70px; height: 70px; font-size: 35px; display: flex; align-items: center; justify-content: center; margin: 0 auto; background: white; font-weight: 900; }
        .box-s { border: 5px solid #2ecc40; color: #2ecc40; border-radius: 10px; width: 65px; height: 65px; font-size: 35px; display: flex; align-items: center; justify-content: center; margin: 0 auto; transform: rotate(45deg); background: white; font-weight: 900; }
        .box-s span { transform: rotate(-45deg); }

        /* Input Display */
        .g-display { font-size: 80px; font-weight: 900; color: #ffdc00; text-shadow: 4px 4px 0px #000; }
        .input-box { font-size: 40px !important; border: 4px solid #ffdc00 !important; background: white !important; color: black !important; }

        /* Record Log Section (Huge) */
        .log-card { background: white; color: black; border-radius: 25px; padding: 15px; min-height: 480px; }
        .log-item { border-bottom: 2px solid #eee; padding: 10px 0; font-size: 20px; font-weight: 800; }
        .symbol { font-size: 24px; }
        .g-num { background: #ffdc00; padding: 2px 12px; border-radius: 6px; border: 2px solid black; }

        /* Action Buttons */
        .btn-copy { background: #2ecc40; border-bottom: 5px solid #25a234; }
        .btn-reset { background: #ff4136; border-bottom: 5px solid #b12b24; }
    </style>
</head>
<body class="p-3">
    <div class="max-w-2xl mx-auto space-y-4">
        
        <div class="pred-section p-5 grid grid-cols-3 gap-2 text-center shadow-2xl">
            <div><p class="font-black text-white text-[10px] mb-2">PRED P</p><div class="box-p"><span id="pred-p">-</span></div></div>
            <div><p class="font-black text-white text-[10px] mb-2">PRED E</p><div class="box-e"><span id="pred-e">-</span></div></div>
            <div><p class="font-black text-white text-[10px] mb-2">PRED S</p><div class="box-s"><span id="pred-s"></span></div></div>
        </div>

        <div class="bg-blue-900/50 p-4 rounded-3xl flex items-center justify-between border-2 border-white/20">
            <div class="text-center flex-1">
                <p class="text-[10px] font-bold text-yellow-400 italic">LAST RESULT</p>
                <div id="highlight-g" class="g-display">-</div>
            </div>
            <div class="flex flex-col gap-2 w-44">
                <input type="number" id="digit-input" class="input-box w-full rounded-2xl text-center outline-none shadow-inner" placeholder="?" oninput="validate(this)">
                <button id="btn-submit" class="w-full py-4 bg-yellow-400 text-black font-black rounded-2xl text-xl uppercase disabled:opacity-30 shadow-lg active:scale-95" onclick="submit()" disabled>ENTER</button>
            </div>
        </div>

        <div id="alert-box" class="hidden">
            <div class="bg-red-600 border-4 border-white text-white p-5 rounded-2xl text-center animate-pulse shadow-2xl">
                <span id="alert-msg" class="text-2xl font-black"></span>
            </div>
        </div>

        <div class="log-card shadow-2xl overflow-hidden">
            <div class="flex justify-between items-center mb-4 border-b-4 border-blue-900 pb-2">
                <h3 class="font-black text-blue-900 text-xl uppercase italic">Record Logs</h3>
                <span id="total-stg" class="bg-blue-900 text-white px-5 py-1 rounded-full font-bold">0 STG</span>
            </div>
            <div id="history-container" class="flex overflow-x-auto gap-4 pb-4"></div>
        </div>

        <div class="grid grid-cols-2 gap-4 pb-10">
            <button onclick="copy()" class="btn-copy py-6 text-white font-black rounded-2xl text-xl shadow-xl uppercase active:translate-y-1 transition-all">
                üìã Copy Data
            </button>
            <button onclick="reset()" class="btn-reset py-6 text-white font-black rounded-2xl text-xl shadow-xl uppercase active:translate-y-1 transition-all">
                üîÑ Reset App
            </button>
        </div>

        <div class="bg-blue-950 p-5 rounded-3xl border-2 border-white/20">
            <h3 class="font-black text-yellow-400 mb-3 text-xs uppercase tracking-widest italic border-b border-white/10 pb-2">Pattern History Logs</h3>
            <div id="warning-history" class="max-h-48 overflow-y-auto space-y-2 text-white font-bold text-sm">
                <div class="italic opacity-30 text-xs text-center">No patterns recorded.</div>
            </div>
        </div>

    </div>

    <script>
        let history = []; let warnings = []; let roll = 1, stage = 1;
        let pNext, eNext, sNext;
        let currentPattern = null;

        function submit() {
            const input = document.getElementById('digit-input');
            const val = parseInt(input.value); const grp = val >= 5 ? 'B' : 'S';
            const entry = { val, grp, roll, stage, p: pNext, pOk: pNext ? pNext === grp : null, e: eNext, eOk: eNext ? eNext === grp : null, s: sNext, sOk: sNext ? sNext === grp : null };
            history.push(entry);
            analyze();
            if(stage === 10) { roll++; stage = 1; } else { stage++; }
            updatePred(val); renderTable(); save();
            input.value = ''; input.focus(); document.getElementById('btn-submit').disabled = true;
        }

        function analyze() {
            const seq = history.map(h => h.grp).join('');
            let found = null;

            // 1. Streak (B/S) 5+
            let last = seq.slice(-1), count = 0;
            for(let i=seq.length-1; i>=0; i--) { if(seq[i]===last) count++; else break; }
            if(count >= 5) found = { type: last==='B'?'·Ä°·ÄÄ·Äº·ÄÆ·Ä∏':'·Ä°·Äû·Ä±·Ä∏', count, start: history.length - count };

            // 2. Ping-Pong (BSBS) 6+
            if(!found && seq.length >= 6) {
                let pp = 1;
                for(let i=seq.length-1; i>0; i--) { if(seq[i] !== seq[i-1]) pp++; else break; }
                if(pp >= 6) found = { type: '·Äê·ÄÖ·Ä∫·Äú·Äæ·Ää·Ä∑·Ä∫·ÄÖ·ÄÆ', count: pp, start: history.length - pp };
            }

            // 3. Double Pair (BBSS) - Continuous
            if(!found && seq.length >= 4) {
                let dp = 0;
                for(let i=seq.length-1; i>=3; i-=2) {
                    if(seq[i]===seq[i-1] && seq[i-2]===seq[i-3] && seq[i]!==seq[i-2]) dp += 2; else break;
                }
                if(dp >= 4) {
                    if(seq.length % 2 !== 0 && seq[seq.length-1] === seq[seq.length-2]) dp += 1;
                    found = { type: '·Ä°·Äê·ÄΩ·Ä≤·Äú·Ä≠·ÄØ·ÄÄ·Ä∫ (BBSS)', count: dp, start: history.length - dp };
                }
            }

            const box = document.getElementById('alert-box');
            if(found) {
                currentPattern = found;
                document.getElementById('alert-msg').innerText = `‚ö†Ô∏è ${found.type} ${found.count} ·ÄÄ·Äº·Ä≠·Äô·Ä∫ ·Äñ·Äº·ÄÖ·Ä∫·Äî·Ä±·Äû·Ää·Ä∫`;
                box.classList.remove('hidden');
            } else {
                if(currentPattern) {
                    const s = history[currentPattern.start];
                    const e = history[history.length - 2];
                    warnings.unshift({ text: `[${currentPattern.type}] ${currentPattern.count} ·ÄÄ·Äº·Ä≠·Äô·Ä∫ (R${s.roll}-S${s.stage} ·Äô·Äæ R${e.roll}-S${e.stage} ·Äë·Ä≠)` });
                    renderWarnings();
                    currentPattern = null;
                }
                box.classList.add('hidden');
            }
        }

        function updatePred(last) {
            pNext = last % 2 === 0 ? 'S' : 'B';
            if(history.length >= 3) {
                const s3 = history.slice(-3).reduce((a,b) => a+b.val, 0);
                eNext = s3 % 2 === 0 ? 'S' : 'B';
            }
            if(history.length >= 10) {
                const s10 = history.slice(-10).reduce((a,b) => a+b.val, 0);
                if(s10 > 45) sNext = 'S'; else if(s10 < 45) sNext = 'B'; else sNext = (last >= 5 ? 'B' : 'S');
            }
            document.getElementById('pred-p').innerText = pNext || '-';
            document.getElementById('pred-e').innerText = eNext || '-';
            document.getElementById('pred-s').innerHTML = sNext ? `<span>${sNext}</span>` : '-';
            document.getElementById('highlight-g').innerText = last;
        }

        function renderTable() {
            const container = document.getElementById('history-container'); container.innerHTML = '';
            document.getElementById('total-stg').innerText = `${history.length} STG`;
            const rolls = history.reduce((acc, cur) => { if(!acc[cur.roll]) acc[cur.roll] = []; acc[cur.roll].push(cur); return acc; }, {});
            Object.keys(rolls).forEach(r => {
                const b = document.createElement('div'); b.className = 'flex-shrink-0 w-80 bg-blue-50 rounded-3xl p-4 border-2 border-blue-200';
                b.innerHTML = `<div class="text-2xl text-center font-black text-blue-900 mb-2 border-b-2 border-blue-200 pb-1 italic uppercase tracking-tighter">Roll ${r}</div>
                    <div class="grid grid-cols-8 gap-1 text-[11px] text-blue-400 font-black mb-2 text-center uppercase">
                        <span>STG</span><span>P</span><span>PC</span><span>E</span><span>EC</span><span>S</span><span>SC</span><span>G</span>
                    </div>`;
                rolls[r].forEach(i => {
                    b.innerHTML += `<div class="log-item grid grid-cols-8 gap-1 items-center text-center">
                        <span class="text-gray-400 text-xs">${i.stage}</span><span class="text-red-600 font-black">${i.p||'-'}</span><span class="symbol">${i.pOk===null?'-':(i.pOk?'‚úÖ':'‚ùå')}</span>
                        <span class="text-purple-600 font-black">${i.e||'-'}</span><span class="symbol">${i.eOk===null?'-':(i.eOk?'‚úÖ':'‚ùå')}</span><span class="text-green-600 font-black">${i.s||'-'}</span>
                        <span class="symbol">${i.sOk===null?'-':(i.sOk?'‚úÖ':'‚ùå')}</span><span class="g-num font-black">${i.val}</span></div>`;
                });
                container.appendChild(b);
            });
            container.scrollLeft = container.scrollWidth;
        }

        function renderWarnings() {
            const container = document.getElementById('warning-history');
            container.innerHTML = warnings.map((w, idx) => `<div class="p-3 bg-white/10 rounded-xl border-l-8 border-yellow-400 font-black text-sm">${warnings.length - idx}. ${w.text}</div>`).join('');
        }

        async function copy() {
            if(!history.length) return;
            let t = "WIN6 PRO REVIEW\nSTG|P|PC|E|EC|S|SC|[G]\n========================\n";
            history.forEach(i => { t += `${i.stage}|${i.p||'-'}|${i.pOk===null?'-':(i.pOk?'‚úÖ':'‚ùå')}|${i.e||'-'}|${i.eOk===null?'-':(i.eOk?'‚úÖ':'‚ùå')}|${i.s||'-'}|${i.sOk===null?'-':(i.sOk?'‚úÖ':'‚ùå')}|[${i.val}]\n`; if(i.stage === 10) t += "------------------------\n"; });
            await navigator.clipboard.writeText(t); alert("Report Copied!");
        }

        function validate(el) { if(el.value.length > 1) el.value = el.value.slice(-1); document.getElementById('btn-submit').disabled = el.value === ""; }
        function save() { localStorage.setItem('WIN6_V9_MAX', JSON.stringify({ history, warnings, roll, stage, currentPattern })); }
        function load() {
            const data = JSON.parse(localStorage.getItem('WIN6_V9_MAX'));
            if(data) { history = data.history; warnings = data.warnings; roll = data.roll; stage = data.stage; currentPattern = data.currentPattern; renderTable(); renderWarnings(); if(history.length) updatePred(history[history.length-1].val); }
        }
        function reset() { if(confirm("Data ·Äê·ÄΩ·Ä±·Ä°·ÄÄ·ÄØ·Äî·Ä∫·Äú·ÄØ·Ä∂·Ä∏·ÄÄ·Ä≠·ÄØ ·Äõ·Äæ·ÄÑ·Ä∫·Ä∏·Äï·ÄÖ·Ä∫·Äô·Äæ·Ä¨ ·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏?")) { localStorage.clear(); location.reload(); } }
        load();
    </script>
</body>
</html>
