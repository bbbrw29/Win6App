<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Win6 Pro - Compact Bold Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pyidaungsu:wght@400;700&display=swap');
        body { font-family: 'Pyidaungsu', sans-serif; background-color: #001529; color: white; }
        
        /* Prediction Indicators */
        .box-p { border: 4px solid #ff4136; color: #ff4136; border-radius: 50%; width: 65px; height: 65px; font-size: 32px; display: flex; align-items: center; justify-content: center; margin: 0 auto; background: white; font-weight: 900; }
        .box-e { border: 4px solid #b10dc9; color: #b10dc9; border-radius: 12px; width: 65px; height: 65px; font-size: 32px; display: flex; align-items: center; justify-content: center; margin: 0 auto; background: white; font-weight: 900; }
        .box-s { border: 4px solid #2ecc40; color: #2ecc40; border-radius: 8px; width: 60px; height: 60px; font-size: 32px; display: flex; align-items: center; justify-content: center; margin: 0 auto; transform: rotate(45deg); background: white; font-weight: 900; }
        .box-s span { transform: rotate(-45deg); }

        /* Compact Log Styles */
        .log-card { background: #f8f9fa; color: black; border-radius: 20px; padding: 12px; }
        .roll-card { flex-shrink: 0; width: 260px; background: white; border-radius: 15px; padding: 10px; border: 2px solid #e9ecef; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        
        /* Status Symbols - HIGH VISIBILITY */
        .status-ok { color: #00c853; font-size: 24px; font-weight: 900; }
        .status-no { color: #ff1744; font-size: 24px; font-weight: 900; }

        .mini-shape { width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; background: white; font-weight: 900; font-size: 14px; border-width: 2px; }
        .p-circle { border-radius: 50%; border-color: #ff4136; color: #ff4136; }
        .e-square { border-radius: 6px; border-color: #b10dc9; color: #b10dc9; }
        .s-diamond { transform: rotate(45deg); border-color: #2ecc40; color: #2ecc40; border-radius: 4px; }
        .s-diamond span { transform: rotate(-45deg); }

        .g-num { background: #ffdc00; width: 35px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 6px; border: 2px solid black; font-weight: 900; font-size: 18px; }
        .g-display { font-size: 70px; font-weight: 900; color: #ffdc00; text-shadow: 3px 3px 0px #000; line-height: 1; }
    </style>
</head>
<body class="p-2">
    <div class="max-w-md mx-auto space-y-3">
        
        <div class="bg-[#002b52] p-4 grid grid-cols-3 gap-1 text-center rounded-[25px] border-b-4 border-cyan-400">
            <div><p class="text-[9px] font-bold opacity-70 mb-1 uppercase">P-Odd</p><div class="box-p"><span id="pred-p">-</span></div></div>
            <div><p class="text-[9px] font-bold opacity-70 mb-1 uppercase">E-Sum3</p><div class="box-e"><span id="pred-e">-</span></div></div>
            <div><p class="text-[9px] font-bold opacity-70 mb-1 uppercase">S-Double</p><div class="box-s"><span id="pred-s"></span></div></div>
        </div>

        <div class="bg-[#003a70] p-4 rounded-[1.5rem] flex items-center justify-between shadow-inner">
            <div class="text-center flex-1">
                <div id="highlight-g" class="g-display">-</div>
            </div>
            <div class="flex flex-col gap-2 w-32">
                <input type="number" id="digit-input" class="w-full rounded-xl text-center text-4xl font-black p-2 outline-none border-4 border-yellow-400 text-black" placeholder="?" oninput="validate(this)">
                <button id="btn-submit" class="w-full py-3 bg-yellow-400 text-black font-black rounded-xl text-xl uppercase active:scale-95 disabled:opacity-30" onclick="submit()" disabled>ENTER</button>
            </div>
        </div>

        <div class="log-card">
            <div class="flex justify-between items-center mb-3 px-2">
                <h3 class="font-black text-blue-900 text-lg italic uppercase tracking-tighter">Live Logs</h3>
                <span id="total-stg" class="bg-blue-900 text-white px-3 py-1 rounded-full font-black text-xs">0 STG</span>
            </div>
            <div id="history-container" class="flex overflow-x-auto gap-3 pb-2 px-1"></div>
        </div>

        <div class="grid grid-cols-2 gap-3">
            <button onclick="copy()" class="bg-green-600 py-4 text-white font-black rounded-xl text-md uppercase border-b-4 border-green-800">üìã Copy</button>
            <button onclick="reset()" class="bg-red-500 py-4 text-white font-black rounded-xl text-md uppercase border-b-4 border-red-800">üîÑ Reset</button>
        </div>
    </div>

    <script>
        let history = []; let warnings = []; let roll = 1, stage = 1;
        let pNext, eNext, sNext;

        function submit() {
            const input = document.getElementById('digit-input');
            const val = parseInt(input.value); const grp = val >= 5 ? 'B' : 'S';
            const entry = { val, grp, roll, stage, p: pNext, pOk: pNext ? pNext === grp : null, e: eNext, eOk: eNext ? eNext === grp : null, s: sNext, sOk: sNext ? sNext === grp : null };
            history.push(entry);
            if(stage === 10) { roll++; stage = 1; } else { stage++; }
            updatePred(val); renderTable(); save();
            input.value = ''; input.focus(); document.getElementById('btn-submit').disabled = true;
        }

        function updatePred(last) {
            pNext = last % 2 === 0 ? 'S' : 'B';
            if(history.length >= 3) { eNext = history.slice(-3).reduce((a,b) => a+b.val, 0) % 2 === 0 ? 'S' : 'B'; }
            
            // S Logic: DOUBLE SUM (Locked)
            if(history.length >= 10) { 
                let s10 = history.slice(-10).reduce((a,b) => a+b.val, 0); 
                let dSum = s10;
                while (dSum >= 10) { dSum = dSum.toString().split('').map(Number).reduce((a, b) => a + b, 0); }
                sNext = (dSum % 2 !== 0) ? 'B' : 'S';
            } else { sNext = null; }

            document.getElementById('pred-p').innerText = pNext || '-';
            document.getElementById('pred-e').innerText = eNext || '-';
            document.getElementById('pred-s').innerHTML = sNext ? `<span>${sNext}</span>` : '-';
            document.getElementById('highlight-g').innerText = last;
        }

        function renderTable() {
            const container = document.getElementById('history-container'); container.innerHTML = '';
            document.getElementById('total-stg').innerText = `${history.length} STG`;
            const rolls = history.reduce((acc, cur) => { if(!acc[cur.roll]) acc[cur.roll] = []; acc[cur.roll].push(cur); return acc; }, {});
            
            Object.keys(rolls).forEach(r => {
                const b = document.createElement('div'); b.className = 'roll-card';
                b.innerHTML = `<div class="text-lg text-center font-black text-blue-900 mb-2 border-b-2 border-blue-50 pb-1">ROLL ${r}</div>
                    <div class="grid grid-cols-7 gap-0 text-[10px] text-gray-400 font-bold mb-1 text-center border-b border-gray-100">
                        <span>STG</span><span>P</span><span>OK</span><span>E</span><span>OK</span><span>S</span><span>OK</span>
                    </div>`;
                rolls[r].forEach(i => {
                    b.innerHTML += `<div class="flex items-center justify-between py-1 border-b border-gray-50 last:border-0">
                        <span class="text-[10px] font-bold text-gray-400 w-4">${i.stage}</span>
                        <div class="mini-shape p-circle">${i.p||'-'}</div>
                        <span class="${i.pOk?'status-ok':'status-no'} w-6 text-center">${i.pOk===null?'-':(i.pOk?'‚úÖ':'‚ùå')}</span>
                        <div class="mini-shape e-square">${i.e||'-'}</div>
                        <span class="${i.eOk?'status-ok':'status-no'} w-6 text-center">${i.eOk===null?'-':(i.eOk?'‚úÖ':'‚ùå')}</span>
                        <div class="mini-shape s-diamond"><span>${i.s||'-'}</span></div>
                        <span class="${i.sOk?'status-ok':'status-no'} w-6 text-center">${i.sOk===null?'-':(i.sOk?'‚úÖ':'‚ùå')}</span>
                    </div>`;
                });
                container.appendChild(b);
            });
            container.scrollLeft = container.scrollWidth;
        }

        async function copy() {
            let t = "WIN6 PRO RECORD\n";
            history.forEach(i => { t += `R${i.roll}S${i.stage}: [${i.val}] P:${i.pOk?'‚úÖ':'‚ùå'} E:${i.eOk?'‚úÖ':'‚ùå'} S:${i.sOk?'‚úÖ':'‚ùå'}\n`; });
            await navigator.clipboard.writeText(t); alert("Copied!");
        }

        function validate(el) { if(el.value.length > 1) el.value = el.value.slice(-1); document.getElementById('btn-submit').disabled = el.value === ""; }
        function save() { localStorage.setItem('WIN6_V_COMPACT', JSON.stringify({ history, roll, stage })); }
        function load() {
            const data = JSON.parse(localStorage.getItem('WIN6_V_COMPACT'));
            if(data) { history = data.history; roll = data.roll; stage = data.stage; renderTable(); if(history.length) updatePred(history[history.length-1].val); }
        }
        function reset() { if(confirm("Clear all data?")) { localStorage.clear(); location.reload(); } }
        load();
    </script>
</body>
</html>
